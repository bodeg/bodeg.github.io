"use strict";(self.webpackChunkGalbit=self.webpackChunkGalbit||[]).push([[192],{1192:(Y,b,i)=>{i.r(b),i.d(b,{BookModule:()=>M});var f=i(4466),u=i(6461),Z=i(1771),l=i(8609),r=i(4182),k=i(4850),m=(()=>{return(e=m||(m={}))[e.Undefined=0]="Undefined",e[e.Adventure=1]="Adventure",e[e.Biography=2]="Biography",e[e.Dystopia=3]="Dystopia",e[e.Fantastic=4]="Fantastic",e[e.Horror=5]="Horror",e[e.Science=6]="Science",e[e.ScienceFiction=7]="ScienceFiction",e[e.Poetry=8]="Poetry",m;var e})();const A=(0,l.Uoq)(m);var t=i(6435);let C=(()=>{class e{constructor(o){this.restService=o,this.apiName="Default",this.create=n=>this.restService.request({method:"POST",url:"/api/app/book",body:n},{apiName:this.apiName}),this.delete=n=>this.restService.request({method:"DELETE",url:`/api/app/book/${n}`},{apiName:this.apiName}),this.get=n=>this.restService.request({method:"GET",url:`/api/app/book/${n}`},{apiName:this.apiName}),this.getAuthorLookup=()=>this.restService.request({method:"GET",url:"/api/app/book/author-lookup"},{apiName:this.apiName}),this.getList=n=>this.restService.request({method:"GET",url:"/api/app/book",params:{skipCount:n.skipCount,maxResultCount:n.maxResultCount,sorting:n.sorting}},{apiName:this.apiName}),this.update=(n,s)=>this.restService.request({method:"PUT",url:`/api/app/book/${n}`,body:s},{apiName:this.apiName})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(l.vgb))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=i(2577),c=i(1765),v=i(6344),g=i(6166),T=i(8376),h=i(3951),d=i(9808);function N(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-list-row-actions",15),t.NdJ("editClick",function(){const p=t.CHM(o).row;return t.oxw().edit(p.id)})("deleteClick",function(){const p=t.CHM(o).row;return t.oxw().delete(p.id)}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("permissions",o.permissions)}}function q(e,a){1&e&&(t._uU(0),t.ALo(1,"abpLocalization")),2&e&&t.hij(" ",t.lcZ(1,1,"::Enum:BookType:"+a.row.type)," ")}function U(e,a){1&e&&(t._uU(0),t.ALo(1,"date")),2&e&&t.hij(" ",t.lcZ(1,1,a.row.publishDate)," ")}function J(e,a){1&e&&(t._uU(0),t.ALo(1,"currency")),2&e&&t.hij(" ",t.lcZ(1,1,a.row.price)," ")}function B(e,a){if(1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,o.selectedDto.id?"::Edit":"::NewBook"))}}function L(e,a){if(1&e&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("ngValue",o.id),t.xp6(1),t.hij(" ",o.name," ")}}function D(e,a){if(1&e&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("ngValue",o.value),t.xp6(1),t.hij(" ",o.key,"")}}function y(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"form",16),t.NdJ("ngSubmit",function(){return t.CHM(o),t.oxw().save()}),t.TgZ(1,"div",17),t.TgZ(2,"label",18),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"span"),t._uU(5," * "),t.qZA(),t._UZ(6,"input",19),t.qZA(),t.TgZ(7,"div",17),t.TgZ(8,"label",20),t._uU(9,"Author"),t.qZA(),t.TgZ(10,"span"),t._uU(11," * "),t.qZA(),t.TgZ(12,"select",21),t.TgZ(13,"option",22),t._uU(14,"Select author"),t.qZA(),t.YNc(15,L,2,2,"option",23),t.ALo(16,"async"),t.qZA(),t.qZA(),t.TgZ(17,"div",17),t.TgZ(18,"label",24),t._uU(19,"Price"),t.qZA(),t.TgZ(20,"span"),t._uU(21," * "),t.qZA(),t._UZ(22,"input",25),t.qZA(),t.TgZ(23,"div",17),t.TgZ(24,"label",26),t._uU(25,"Type"),t.qZA(),t.TgZ(26,"span"),t._uU(27," * "),t.qZA(),t.TgZ(28,"select",27),t.TgZ(29,"option",22),t._uU(30,"Select a book type"),t.qZA(),t.YNc(31,D,2,2,"option",23),t.qZA(),t.qZA(),t.TgZ(32,"div",17),t.TgZ(33,"label"),t._uU(34,"Publish date"),t.qZA(),t.TgZ(35,"span"),t._uU(36," * "),t.qZA(),t.TgZ(37,"input",28,29),t.NdJ("click",function(){return t.CHM(o),t.MAs(38).toggle()}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(13),t.Q6J("ngValue",null),t.xp6(2),t.Q6J("ngForOf",t.lcZ(16,5,o.authors$)),t.xp6(14),t.Q6J("ngValue",null),t.xp6(2),t.Q6J("ngForOf",o.bookTypes)}}function S(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",30),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA(),t.TgZ(3,"button",31),t.NdJ("click",function(){return t.CHM(o),t.oxw().save()}),t._UZ(4,"i",32),t._uU(5),t.ALo(6,"abpLocalization"),t.qZA()}if(2&e){const o=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,3,"::Close")," "),t.xp6(2),t.Q6J("disabled",o.form.invalid),t.xp6(2),t.hij(" ",t.lcZ(6,5,"::Save")," ")}}const w=[{path:"",component:(()=>{class e extends x.u{constructor(o,n,s,p){super(o,n,s),this.bookService=p,this.bookTypes=A,this.permissions={create:"Galbit.Demo.Books.Create",edit:"Galbit.Demo.Books.Edit",delete:"Galbit.Demo.Books.Delete"},this.authors$=p.getAuthorLookup().pipe((0,k.U)(_=>_.items))}ngOnInit(){super.ngOnInit()}get crudService(){return this.bookService}buildForm(){this.form=this.fb.group({name:[this.selectedDto.name||"",r.kI.required],authorId:[this.selectedDto.authorId||null,r.kI.required],type:[this.selectedDto.type||null,r.kI.required],publishDate:[this.selectedDto.publishDate?new Date(this.selectedDto.publishDate):null,r.kI.required],price:[this.selectedDto.price||null,r.kI.required]})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(l.XNV),t.Y36(r.qu),t.Y36(c.YP),t.Y36(C))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-book"]],features:[t._Bn([l.XNV,{provide:l.bAR,useValue:500},{provide:u.DO,useClass:u.s5}]),t.qOj],decls:27,vars:28,consts:[[1,"card"],[3,"title","permission","buttonText","buttonClick"],[1,"card-body"],["default","",3,"rows","count","list"],[3,"name","maxWidth","sortable"],["ngx-datatable-cell-template",""],["prop","name",3,"name"],["prop","authorName",3,"name","sortable"],["prop","type",3,"name"],["prop","publishDate",3,"name"],["prop","price",3,"name"],[3,"visible","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[3,"permissions","editClick","deleteClick"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","book-name"],["type","text","id","book-name","formControlName","name","autofocus","",1,"form-control"],["for","author-id"],["id","author-id","formControlName","authorId",1,"form-control"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","book-price"],["type","number","id","book-price","formControlName","price",1,"form-control"],["for","book-type"],["id","book-type","formControlName","type",1,"form-control"],["name","datepicker","formControlName","publishDate","ngbDatepicker","",1,"form-control",3,"click"],["datepicker","ngbDatepicker"],["type","button","abpClose","",1,"btn","btn-secondary"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-check","mr-1"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"app-list-header",1),t.NdJ("buttonClick",function(){return n.create()}),t.qZA(),t.TgZ(2,"div",2),t.TgZ(3,"ngx-datatable",3),t.TgZ(4,"ngx-datatable-column",4),t.ALo(5,"abpLocalization"),t.YNc(6,N,1,1,"ng-template",5),t.qZA(),t._UZ(7,"ngx-datatable-column",6),t.ALo(8,"abpLocalization"),t._UZ(9,"ngx-datatable-column",7),t.ALo(10,"abpLocalization"),t.TgZ(11,"ngx-datatable-column",8),t.ALo(12,"abpLocalization"),t.YNc(13,q,2,3,"ng-template",5),t.qZA(),t.TgZ(14,"ngx-datatable-column",9),t.ALo(15,"abpLocalization"),t.YNc(16,U,2,3,"ng-template",5),t.qZA(),t.TgZ(17,"ngx-datatable-column",10),t.ALo(18,"abpLocalization"),t.YNc(19,J,2,3,"ng-template",5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"abp-modal",11),t.NdJ("visibleChange",function(p){return n.isModalOpen=p}),t.YNc(21,B,3,3,"ng-template",null,12,t.W1O),t.YNc(23,y,39,7,"ng-template",null,13,t.W1O),t.YNc(25,S,7,7,"ng-template",null,14,t.W1O),t.qZA()),2&o&&(t.xp6(1),t.Q6J("title","::Menu:Books")("permission",n.permissions.create)("buttonText","::NewBook"),t.xp6(2),t.Q6J("rows",n.pagedResultDto.items)("count",n.pagedResultDto.totalCount)("list",n.list),t.xp6(1),t.Q6J("name",t.lcZ(5,16,"::Actions"))("maxWidth",150)("sortable",!1),t.xp6(3),t.Q6J("name",t.lcZ(8,18,"::Name")),t.xp6(2),t.Q6J("name",t.lcZ(10,20,"::Author"))("sortable",!1),t.xp6(2),t.Q6J("name",t.lcZ(12,22,"::Type")),t.xp6(3),t.Q6J("name",t.lcZ(15,24,"::PublishDate")),t.xp6(3),t.Q6J("name",t.lcZ(18,26,"::Price")),t.xp6(3),t.Q6J("visible",n.isModalOpen))},directives:[v._,g.nE,c.x7,c.j3,g.UC,g.vq,T.b,c.zS,r._Y,r.JL,l.YzZ,r.sg,h.hL,r.Fj,r.JJ,r.u,h.J5,l.Uqp,r.EJ,r.YN,r.Kr,d.sg,r.wV,u.J4,c.YM],pipes:[l.fuE,d.uU,d.H9,d.Ov],styles:[""]}),e})(),canActivate:[l.a1M,l.nG9]}];let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(w)],Z.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.m,u.M,F]]}),e})()}}]);