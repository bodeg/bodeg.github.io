"use strict";(self.webpackChunkGalbit=self.webpackChunkGalbit||[]).push([[27],{1027:(w,m,i)=>{i.r(m),i.d(m,{AuthorModule:()=>J});var f=i(4466),d=i(1771),u=i(8609),s=i(4182),h=i(6461),c=i(1765),t=i(6435);let b=(()=>{class e{constructor(o){this.restService=o,this.apiName="Default",this.create=r=>this.restService.request({method:"POST",url:"/api/app/author",body:r},{apiName:this.apiName}),this.delete=r=>this.restService.request({method:"DELETE",url:`/api/app/author/${r}`},{apiName:this.apiName}),this.get=r=>this.restService.request({method:"GET",url:`/api/app/author/${r}`},{apiName:this.apiName}),this.getList=r=>this.restService.request({method:"GET",url:"/api/app/author",params:{filter:r.filter,sorting:r.sorting,skipCount:r.skipCount,maxResultCount:r.maxResultCount}},{apiName:this.apiName}),this.update=(r,n)=>this.restService.request({method:"PUT",url:`/api/app/author/${r}`,body:n},{apiName:this.apiName})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(u.vgb))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=i(6344),p=i(6166),_=i(8376),A=i(3951),C=i(9808);function v(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"app-list-row-actions",12),t.NdJ("editClick",function(){const l=t.CHM(o).row;return t.oxw().editAuthor(l.id)})("deleteClick",function(){const l=t.CHM(o).row;return t.oxw().deleteAuthor(l.id)}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("permissions",o.permissions)}}function Z(e,a){1&e&&(t._uU(0),t.ALo(1,"date")),2&e&&t.hij(" ",t.lcZ(1,1,a.row.birthDate)," ")}function x(e,a){if(1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,o.selectedAuthor.id?"::Edit":"::NewAuthor"))}}function T(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"form",13),t.NdJ("ngSubmit",function(){return t.CHM(o),t.oxw().save()}),t.TgZ(1,"div",14),t.TgZ(2,"label",15),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"span"),t._uU(5," * "),t.qZA(),t._UZ(6,"input",16),t.qZA(),t.TgZ(7,"div",14),t.TgZ(8,"label"),t._uU(9,"Birth date"),t.qZA(),t.TgZ(10,"span"),t._uU(11," * "),t.qZA(),t.TgZ(12,"input",17,18),t.NdJ("click",function(){return t.CHM(o),t.MAs(13).toggle()}),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("formGroup",o.form)}}function N(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",19),t._uU(1),t.ALo(2,"abpLocalization"),t.qZA(),t.TgZ(3,"button",20),t.NdJ("click",function(){return t.CHM(o),t.oxw().save()}),t._UZ(4,"i",21),t._uU(5),t.ALo(6,"abpLocalization"),t.qZA()}if(2&e){const o=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,3,"::Close")," "),t.xp6(2),t.Q6J("disabled",o.form.invalid),t.xp6(2),t.hij(" ",t.lcZ(6,5,"::Save")," ")}}const S=[{path:"",component:(()=>{class e{constructor(o,r,n,l){this.list=o,this.authorService=r,this.fb=n,this.confirmation=l,this.author={items:[],totalCount:0},this.isModalOpen=!1,this.selectedAuthor={},this.permissions={create:"Galbit.Demo.Authors.Create",edit:"Galbit.Demo.Authors.Edit",delete:"Galbit.Demo.Authors.Delete"}}ngOnInit(){this.list.hookToQuery(r=>this.authorService.getList(r)).subscribe(r=>{this.author=r})}createAuthor(){this.selectedAuthor={},this.buildForm(),this.isModalOpen=!0}editAuthor(o){this.authorService.get(o).subscribe(r=>{this.selectedAuthor=r,this.buildForm(),this.isModalOpen=!0})}deleteAuthor(o){this.confirmation.warn("::AreYouSureToDelete","::AreYouSure").subscribe(r=>{r===c.Tv.Status.confirm&&this.authorService.delete(o).subscribe(()=>this.list.get())})}buildForm(){this.form=this.fb.group({name:[this.selectedAuthor.name||"",s.kI.required],birthDate:[this.selectedAuthor.birthDate?new Date(this.selectedAuthor.birthDate):null,s.kI.required]})}save(){this.form.invalid||(this.selectedAuthor.id?this.authorService.update(this.selectedAuthor.id,this.form.value).subscribe(()=>{this.isModalOpen=!1,this.form.reset(),this.list.get()}):this.authorService.create(this.form.value).subscribe(()=>{this.isModalOpen=!1,this.form.reset(),this.list.get()}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.XNV),t.Y36(b),t.Y36(s.qu),t.Y36(c.YP))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-author"]],features:[t._Bn([u.XNV,{provide:h.DO,useClass:h.s5}])],decls:19,vars:18,consts:[[1,"card"],[3,"title","permission","buttonText","buttonClick"],[1,"card-body"],["default","",3,"rows","count","list"],[3,"name","maxWidth","sortable"],["ngx-datatable-cell-template",""],["prop","name",3,"name"],[3,"name"],[3,"visible","visibleChange"],["abpHeader",""],["abpBody",""],["abpFooter",""],[3,"permissions","editClick","deleteClick"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","author-name"],["type","text","id","author-name","formControlName","name","autofocus","",1,"form-control"],["name","datepicker","formControlName","birthDate","ngbDatepicker","",1,"form-control",3,"click"],["datepicker","ngbDatepicker"],["type","button","abpClose","",1,"btn","btn-secondary"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-check","mr-1"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"app-list-header",1),t.NdJ("buttonClick",function(){return r.createAuthor()}),t.qZA(),t.TgZ(2,"div",2),t.TgZ(3,"ngx-datatable",3),t.TgZ(4,"ngx-datatable-column",4),t.ALo(5,"abpLocalization"),t.YNc(6,v,1,1,"ng-template",5),t.qZA(),t._UZ(7,"ngx-datatable-column",6),t.ALo(8,"abpLocalization"),t.TgZ(9,"ngx-datatable-column",7),t.ALo(10,"abpLocalization"),t.YNc(11,Z,2,3,"ng-template",5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"abp-modal",8),t.NdJ("visibleChange",function(l){return r.isModalOpen=l}),t.YNc(13,x,3,3,"ng-template",null,9,t.W1O),t.YNc(15,T,14,1,"ng-template",null,10,t.W1O),t.YNc(17,N,7,7,"ng-template",null,11,t.W1O),t.qZA()),2&o&&(t.xp6(1),t.Q6J("title","::Menu:Authors")("permission",r.permissions.create)("buttonText","::NewAuthor"),t.xp6(2),t.Q6J("rows",r.author.items)("count",r.author.totalCount)("list",r.list),t.xp6(1),t.Q6J("name",t.lcZ(5,12,"::Actions"))("maxWidth",150)("sortable",!1),t.xp6(3),t.Q6J("name",t.lcZ(8,14,"::Name")),t.xp6(2),t.Q6J("name",t.lcZ(10,16,"::BirthDate")),t.xp6(3),t.Q6J("visible",r.isModalOpen))},directives:[g._,p.nE,c.x7,c.j3,p.UC,p.vq,_.b,c.zS,s._Y,s.JL,u.YzZ,s.sg,A.hL,s.Fj,s.JJ,s.u,A.J5,u.Uqp,h.J4,c.YM],pipes:[u.fuE,C.uU],styles:[""]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(S)],d.Bz]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.m,M,h.M]]}),e})()}}]);